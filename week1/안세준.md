# 01. HTTP 개관

> 목표 : HTTP를 빠르게 훑어본다

1. HTTP:인터넷의 멀티미디어 배달부

- HTTP는 신뢰성있는 데이터 전송 프로토콜을 사용하기 때문에, 데이터가 손상되지 않는다.
- 개발자는 인터넷의 결함, 약점 걱정없이 애플리케이션 고유의 기능을 구현하는데 집중이 가능
  

02. 웹 클라이언트와 서버

- 클라이언트는 서버에게 HTTP 요청을 URL로 보내고	(index.html 주세요)
  서버는 요청된 데이터를 HTTP 응답(타입과 길이등의 정보)으로 돌려준다.	
  (HTTP 포맷이고 길이는 3.150글자임)



03. 리소스

- 리소스란?
  - 웹 서버는 웹 리소스를 관리하고 제공
  - 웹 리소스는 웹 콘텐츠의 원천
  - 가장 단순한 웹 리소스는 웹 서버 파일 시스템의 정적파일이다.
    - 텍스트,html,워드,jpeg 이미지 등등
  - 그러나 정적일 필요는 없고, 요청에 따라 다른 컨텐츠를 생성하는 동적 리소스도 있다
    - 어떤 종류의 컨텐츠 소스도 리소스가 될 수 있다
      - 웹 게이트 웨이, 인터넷 검색엔진 등
      
- 1) 미디어 타입
  - 웹서버는 모든 HTTP객체 데이터에 MIME 타입을 붙인다.
    MIME (Multipurpose Internet Mail Extensions)	발음을 어떻게 하나? 
    : 이메일과 함께 동봉할 파일을 텍스트 문자로 전환해서 
    이메일시스템을 통해 전달하려고 개발되었지만
    현재는 웹을 통해서 여러형태의 파일을 전달하는데 쓰이고 있다 (검색한 내용)
  - 웹브라우저는 서버로부터 객체를 돌려 받을 때 다를 수 있는 객체인지 MIME 타입을 통해 확인
  - 사선(/)으로 구분된 주타입,부타입으로 이루어진 문자열들
    - ex)
      Content-type : image/jpeg
      						text/htem, text/gif 등등
  
- 2) URI (uniform resource identifier) : 통합자원 식별자
  - 클라이언트는 리소스를 지목 할 수 있다
  - 서버 리소스 이름은 URI라고 한다
  - URL과 URN은 URI의 종류
  
- 3) URL (uniform resource identifier) : 통합 자원 지시자
  - http://www.abc.com/aaa/index.gif
    - 프로토콜	:	http://
    - 서버의 인터넷 주소 : www.abc.com
    - 웹 서버의 리소스 : aaa/index.gif
  - 오늘날 대부분의 URI는 URL이다.



- 4) URN (uniform resource identifier) : 통합 자원 이름
  - 위치에 영향을 받지 않는 유일무이한 이름 역할
  - 리소스가 그 이름을 변하지 않게 유지하는 한 URL은 리소스를 옮기더라고 문제 없이 작동
  - 여전히 실험중이고 아직 채택되지 않았지만 전망은 밝다



04. 트랜잭션

- HTTP 트랜잭션은 요청과 응답 메시지로 구성되어 있다
- 모든 HTTP 요청 메시지는 한개의 메서드를 갖는다
  - 메서드 : 어떤 동작이 취해져아 하는지 알려줌
    	get, post, put, delete, head	(3장에서 자세히 다룸)
  
- 모든 HTTP응답 메시지는 상태 코드와 함께 반환된다.
  - 상태코드 : 요청이 성공인지 실패인지 아니면 다른 조치가 필요한지 알려주는 세자리 숫자
    200, 302, 404 등 (3장에서 자세히 다룸)
    
- 웹페이지는 여러 객체로 이루어 질 수 있다
  - 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행
  - 웹페이지는 보통 하나의 리소스가 아닌 리소스의 모음이다



05. 메시지 

- 요청메시지와 응답메시지, (다른 종류의 HTTP 메시지는 없다.)
  - 참고 : 그림1.7 (12p)
  - 시작줄 : 요청은 무엇을 해야하는지, 응답은 무슨일이 일어났는지 나타냄
  - 헤더 : 0개 이상으 헤더 필드가 이어지고, key:value 로 구성
  - 본문
    - 요청은 웹 서버로 데이터를 실어 보내고, 응답은 클라이언트로 데이터를 반환
    - 시작줄,헤더와 다르게 임의의 이진 데이터를 포함할 수 있다 (이미지,비디오 등)



06. TCP 커넥션

- 1)  TCP/IP
  - TCP (Transmission Control Protocol, 전송 제어 프로토콜)
    - HTTP는 네트워크 통신의 핵심적인 세부사항에 대해 신경쓰지 않고 TCP/IP에게 맡긴다.
    - TCP/IP : 인터넷 전송 프로토콜, TCP,IP가 층을 이루는 패킷교환 프로토콜
    - 일단 TCP 커넥션이 맺어지면, 메시지가 잘못 수신되는 일은 결코 없다.
  
- 2)  접속,IP주소, 포트번호
  - HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에, 
클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 한다.
  - 웹브라우저가 어떻게 HTTP를 이용해서 서버의 HTML 리소스를 보여주는지 순서
    1. 웹브라우저는 서버의 URL에서 호스트 명을 추출
    2. 웹브라우저는 서버의 호스트명을 IP로 변환 (DNS서버)
    3. 웹브라우저는 URL에서 포트번호(있으면)를 추출 (없으면 기본값 80으로 생각)
    4. 웹브라우저는 웹 서버와 TCP 커넥션을 맺는다.
    5. 웹브라우저는 서버에 HTTP 요청을 보낸다.
    6. 서버는 브라우저에 HTTP 응답을 돌려준다.
    7. 커넥션이 닫히면, 웹브라우저는 문서를 보여준다.



- 3) 텔넷
  - 텔넷이란? (검색)
    - 인터넷을 통하여 원격지의 호스트 컴퓨터에 접속할 때에 지원되는 인터넷 표준 프로토콜.
    - TCP/IP 기반의 프로토콜
    - 원격 터미널 접속서비스
    - TCP 23번 포트 (PC기본적으로)->규약이다.
    - 보안성을 위해 사용자가 포트변경 가능하다
  - 텔넷활성화 URL
  - 책 예제 연결안됨 (16p)



7. 프로토콜 버전

- HTTP/1.1 이 현재의 HTTP버전
- HTTP/2.0은 설계중



8. 웹의 구성요소

1. 프락시 (6장에서 자세히)
   - 클라이언트와 서버사이에 위치한 HTTP 중개자 
   - 클라이언트의 모든 HTTP 요청을 받아 서버에 전달
   - 사용자를 대신해서 서버에 접근
   - 주로 보안을 위해 사용되며, 요청과 응답을 필터링 한다.
ex) 바이러스 검출, 성인 컨텐츠 차단
     
2. 캐시 (7장에서 자세히)
   - 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP창고
   - 자주 찾는 것의 사본을 저장
   - 웹서버보다 근처의 캐시에서 훨씬 더 빨리 문서를 다운 받을 수 있다



3. 게이트웨이 (8장에서 자세히)
   - 다른 애플리케이션과 연결된 특별한 웹서버
   - 주로 HTTP트래픽을 다른 프로토콜로 변환하기 위해 사용 
   - 스스로가 리소스를 갖고 있는 진짜 서버인것처럼 요청을 다룬다.
   - 
4. 터널
   - 단순히 HTTP통신을 전달하기만 하는 특별한 프락시
   - 두 커넥션 사이에서 날(raw) 데이터를 열어보지 않고 그대로 전달해주는 HTTP애플리케이션
   - 그대로 전송해주기 위해 사용
` 대표적인 예가 이해 안감 21p
     
5. 에이전트 (9장에서 자세히)
   - 자동화된 HTTP요청을 만드는 준지능적(semi-intelligent) 웹 클라이언트*는
   - 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램
`이해안가지만 9장에서 자세히



9. 시작의 끝

10. 추가정보





02. URL과 리소스

목표

1. URL의 포맷과 URL이 가르키는 다양한 리소스 형식에 대해 알아보고,
2. URN으로 발전하는 과정에 대해 간략히 알아본다



1. 인터넷 리소스 탐색하기 

- URI는 URL과 URN으로 구성된 종합적인 개념
- URN은 리소스가 어디에 존재하든 이름으로 식별하는데 비해
  URL은 리소스가 어디있는지를 설명해서 리소스를 식별한다.
- 스킴, 서버의 위치, 리소스의 경로
  ex) http://www.abc.com/aaa/index.html
  	- http가 스킴 (어떻게)
  	- www.abc.com이 서버의 위치 (어디에)
  	- aaa/index.html 이 리소스 경로 (무엇을)
- URL은 다른 프로토콜 사용가능
  - mailto	: 메일주소를 가리키고
  - ftp : 서버에 올라가있는 파일을 가리키고
  - rtsp :는 스트리밍을 위해 비디오 서버에 호스팅하고 있는 영화를 가르키고
  이와같이 URL은 인터넷에 필요한 어떤 리소스든지 가리킬 수 있다
  URL은 정보 찾는데 필요한 모든것을 제공하며, 
  원하는 리소스가 어디에 있고 어떻게 가져오는지를 정의한다.



2. URL 문법

<스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>

- 대부분의 URL 스킴의 문법은 9개지만, 중요한 컴포넌트는 스킴, 호스트, 경로 이다

1. 스킴 : 리소스에 어떻게 접근하는지 알려주는 정보 
   - 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지 알려줌(대소문자 안가림)
   
2. 호스트와 포트
   - 인터넷에 있는 리소스를 찾으려면, 리소스를 호스팅하고 있는 장비와 
     그 장비내에서 리소스에 접근할 수 있는 서버가 어디에 있는지 알아야 한다.
     호스트 컴포넌트는 접근하고자 하는 리소스를 가지고 인터넷상의 호스트 장비를 가리킨다. 
     ex) 같은 리소스를 가르키는 예 
		http://www.abc.com:80/index.html		: 호스트 명
		http://161.53.229.42:80/index.html		: IP 주소



3. 사용자 이름과 비밀번호
   - 많은 서버가 자신이 가지고 있는 데이터게 접근하려면
     사용자명과 비밀번호를 요구한다
   - @로 사용자명,비밀번호 컴포넌트를 분리
   - : 로 사용자명과 비밀번호를 분리
     <스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>



4. 경로
   - http://www.abc.com:80/aaa/index.html
     - /aaa/index.html이 경로
     - 경로는 서버가 리소스의 위치를 찾는데 사용하는 정보
        
5. 파라미터 (;로 구분) : 잘이해안감
   - 프로토콜 파라미터가 없으면, 다른 한편에 있는 서버는 그 요청을 잘못처리하거나 처리하지 않는다. 
   - ex) 바이너리와 텍스트, 총 두개의 포맷을 지원하는 FTP에서 
     바이너리 이미지가 텍스트로 전송되는 것을 원하지 않는다. 
     그래서 애플리케이션이 서버에 정확한 요청을 하기 위해 사용
     	ex) http://www.abc.com:80/aaa/index.html;type=d
     
6. 질의 문자열 (? 로 구분)
   - 데이터베이스 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해 
     질문이나 질의를 받을 수 있다.
http://www.abc.com:80/aaa/index.html?type=d



7. 프래그먼트 (#으로 구분)
   - 리소스의 특정 부분을 가르킬 수 있다
   - 브라우저가 서버로부터 전체 리소스를 내려받은 후에 보고자 하는 리소스의 일부를 보여준다. 
     http://www.abc.com:80/aaa/index.html#drills



3. 단축 URL

1. 상대 URL
   - URL을 짧게 표기하는 방식
   - 상대 URL로 리소스에 접근하는데 필요한 모든 정보를 얻기 위해서는 기저(base) URL을 사용해야 함
     http://www.abc.com:80/test.html	<- 절대URL
http://www.abc.com:80/	<- 기저 url
./test.html				<- 상대 url
   - 브라우저 같은 애플리케이션을 상대URL과 절대URL간의 상호 변환을 할 수 있어야 한다.



2. URL확장
   - 어떤 브라우저들은 URL을 입력하고 있는 동안에 자동으로URL을 확장한다.
   - 브라우저는 이런 간단한 기능을 제공하여 사용자의 시간을 절약하고 혼란을 막아준다
   - 하지만, 프락시와 같은 다른 HTTP 애플리케이션에 문제를 발생시킬수도 있다. (6장에서 자세히)



4. 안전하지 않은 문자

어떤 인터넷 프로토콜을 통해서든 안전하게 데이터가 전송 될 수 있도록 URL을 설계하는 것은 중요했다.

따라서 출력이 되지 않거나, 보이지 않는 문자를 이메일 프로그램에서 사용하지 못하게 금지시켰다.

그러나 알파벳 외의 문자도 포함하려고 할 때가  있기때문에

이스케이프라는 기능을 추가하여 안전하지 않는 문자를 안전한 문자로 인코딩할 수 있게 하였다.



1. URL 문자 집합
   - 이스케이프 문자열은 US-ASCII에서 사용이 금지된 문자들로
     특정 문자나 데이터를 인코딩할 수 있게 함으로써 이동성과 완성도를 높였다
2. 인코딩 체계
   - URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식이 고안됨
   - 인코딩은 안전하지 않은 문자를 (%) 기호로 시작해
     ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 '이스케이프' 문자로 바꾼다.
3. 문자 제한
   - URL 내에서 특별한 의미로 예약되어 있는 문자들을 다른 용도로 사용하고자 할때
     반드시 인코딩을 해야한다.
   - 표 2-3 (42p)
4. 좀 더 알아보기
   naver.com/~aaaa 식의 URL에 접근이 가능한 경우도 있는데
   별문제가 없긴 하지만 개발자가 안전하지 않은 문자를 인코딩하지 않은 것이 실수.



5. 스킴의 바다

- http
	
	
	
	
	
  - 일단 URL 포맷을 지키는 하이퍼텍스트 전송 프로토콜
- 기본포트 80
- https
  - HTTP의 양 끝단에서 암호화하기 위해 넷스케이프에서 개발한 보안 소켓 계층(SSL)을 사용
  - 기본포트는 443
  - SSL : Secure Sockets Layer
- mailto
  - 이메일 주소
- ftp
  - 파일전송프로토콜
- rtsp, rtspu
  - 실시간 스트리밍 프로토콜 (Real Time Streaming Protocol)
  - rtspu 의 'u' 는 리소스를 읽기위해 UDP 프로토콜이 사용됨을 뜻함
- file
  - 주어진 호스트기기(로컬디스크,공유시스템 등) 에서 바로 접근할 수 있는 파일들
- news 
  - 특정문서나 뉴스 그룹에 접근하는데 사용한다.
  - news URL은 리소스의 위치 정보를 충분히 포함하지 않는 특이한 속성이 있다
- telnet
  - 대화형 서비스에 접근하는데 사용
  - 자체가 객체를 가리키지는 않지만, 
    리소스라고 할 수 있는 대화형 애플리케이션은 telnet프로토콜을 통해 접근 할 수 있다



6. 미래

- URL 의 단점은 리소스가 옮겨지면 URL은 더이상 사용할 수 없다. 
- 그래서 객체의 위치와 상관없이 이름으로 리소스를 찾고자 하는게 URN
- URL에서 URN으로 바뀌는건 매우 큰 작업이라서 URL이 당분간 사용될 것이다.
